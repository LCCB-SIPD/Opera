{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///home/cordy/One_For_All_PHP/one_for_all/app/main/Profile/page.js"],"sourcesContent":["\"use client\";\nimport { use, useEffect, useState } from \"react\";\nimport { useRouter } from \"next/navigation\";\nimport Image from \"next/image\";\nimport \"../../css/profile.css\"\n\nexport default function Profile() {\n    const router = useRouter();\n    const [user, setUser] = useState(\"\");\n    const [name, setName] = useState(\"\")\n    const [date, setDate] = useState(\"\")\n    const [loading, setLoading] = useState(false)\n    const [error, setError] = useState('')\n    const [hide, setHide] = useState(false)\n\n    //Data Information\n    const [ExName, getExname] = useState(\"\")\n    const [ExBirth, getExbirth] = useState(\"\")\n    const [ExUsername, getExusername] = useState(\"\")\n    const [ExEmail, getExemail] = useState(\"\")\n    const [ExId, getExid] = useState(\"\")\n\n\n    const username = user?.username || \"\"\n\n    useEffect(() => {\n        const checkAuth = async () => {\n            try {\n                const res = await fetch(\"/api/auth\", { credentials: \"include\" });\n                if (!res.ok) {\n                    router.replace(\"/\");\n                    alert(\"Invalid Credentials\")\n                    return;\n                }\n                const userData = await res.json();\n                setUser(userData);\n            } catch (error) {\n                router.replace(\"/\");\n            }\n        };\n        checkAuth();\n\n        if (username) {\n            getUser()\n        }\n\n    }, [username])\n\n        const getUser = async () => {\n            try {\n                const response = await fetch(\"/api/getUser\", {\n                    method: \"POST\",\n                    headers: { \"Content-Type\": \"application/json\" },\n                    body: JSON.stringify({ username }),\n                    credentials: \"include\"\n                })\n\n                const Exdata = await response.json()\n\n                if (response.ok) {\n\n                    setHide(true)\n                    getExname(Exdata.data.name)\n                    getExid(Exdata.data.id)\n                    getExusername(Exdata.data.username)\n                    getExemail(Exdata.data.email)\n                    getExbirth(Exdata.data.birth)\n\n                } else {\n                    setError(data.error)\n                }\n\n            } catch (error) {\n\n                alert('Failed to Fetch Data')\n\n            }\n        }\n            \n        \n    const handleUpdate = async (e) => { \n\n        e.preventDefault()\n\n        setLoading(true)\n\n        try {\n\n            const response = await fetch('/api/profile_set_up', {\n                method: 'POST',\n                headers: {\n                    'Content-Type': 'application/json'\n                },\n                body: JSON.stringify({\n                    username,\n                    name,\n                    date\n                })\n            })\n\n            const data = await response.json()\n\n            if(response.ok) {\n                alert(data.message)\n                window.location.reload()\n            } else {\n                setError(data.error)\n                setLoading(false)\n            }\n\n        } catch (error) {\n            setError('Error Database Connection')\n        }\n\n\n    }\n\n\n    return(\n        <div className=\"Profile\">\n            <div className=\"profile_info\">\n                <div className=\"profile_pic2\">\n                    <Image\n                        src=\"https://media.istockphoto.com/id/1300845620/vector/user-icon-flat-isolated-on-white-background-user-symbol-vector-illustration.jpg?s=612x612&w=0&k=20&c=yBeyba0hUkh14_jgv1OKqIH0CCSWU_4ckRkAoy2p73o=\"\n                        alt=\"Sample\"\n                        fill\n                        unoptimized\n                    />\n                </div>\n                <div className=\"profile_data\">\n                    <div className=\"profile_infos\">\n                        <div>\n                            <h1>Name: {ExName}</h1>\n                        </div>\n                        <div>\n                            <h1>Birthday: {ExBirth}</h1>\n                        </div>\n                        <div>\n                            <h1>Email: {ExEmail}</h1>\n                        </div>\n                        <div>\n                            <h1>User ID: {ExId}</h1>\n                        </div>\n                        <div>\n                            <h1>Username: @{ExUsername}</h1>\n                        </div>\n                    </div>\n                    <div className={`${hide ? \"hidden\": \"set_up_profile\"}`}>\n                        <form onSubmit={handleUpdate}>\n                            <h1>Set up Profile Information</h1>\n                            <div>\n                                <label htmlFor=\"name\">Name: </label>\n                                <input \n                                type=\"text\" \n                                id=\"name\"\n                                value={name}\n                                onChange={(e) => setName(e.target.value)}\n                                required\n                                />\n                            </div>\n                            <div>\n                                <label htmlFor=\"birth\">Birthday: </label>\n                                <input \n                                type=\"date\" \n                                id=\"birth\"\n                                value={date}\n                                onChange={(e) => setDate(e.target.value)} \n                                required/>\n                            </div>\n                            <div>\n                                <button type=\"submit\">Update</button>\n                            </div>\n                            {error && <p style={{ color: \"#f00\" }}>{error}</p>}\n                            <h1 className={`loading-screen ${loading ? \"\": \"hidden\"}`}>Updating...</h1>\n\n                        </form>\n                    </div>\n                </div>\n                \n            </div>\n            <div className=\"inventory\">\n\n            </div>\n        </div>\n    )\n}"],"names":[],"mappings":"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","debugId":null}}]
}